	contract DataStore
		up pushMy (Type t) (Any a)
	contract Echo
		up echoIt (String s)
	contract SetState
	contract MyHandler
		down missing

	entity Account
		String name
	
	object Tracker
		List[Number] cnt <- Nil
		
		ctor simple

		method push (Number n)
			cnt <- n:cnt
		
	card TestCard
		state
			Boolean sayHello
			Account acct
			Tracker tracker <- Tracker.simple

		implements SetState
		implements Echo e
		implements DataStore ds
		
		handler MyHandler LocalHandler
			missing
				acct <- (Account "hi")
				<- ds.pushMy (type Account) (Account "yo")
# TODO: we should be able to share the "Account" here by defining it in a nested scope
#					a = Account
		
		template
			.
				"hello, world" :  (styleIf 'show' sayHello)
					click => echoHello
				acct.name
					click => echoMessage "fred"
			
		event echoHello ev
			<- e.echoIt "hello clicked"
			<- tracker.push x
			
		event echoMessage (String msg) ev
			<- e.echoIt msg

	id x = x
	x = 420

	styleIf style b
		if (b) = style
		else = ''
	